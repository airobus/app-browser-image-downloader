# 版本更新记录

本文档记录每次代码更新的核心变更，便于快速查阅。

---

## v1.1.0 (2026-01-29) - 图片预览功能

### 🎯 更新目标
解决用户反馈的"缩略图太小，无法判断原图清晰度"问题。

### ✅ 核心变更

#### 1. 图片预览功能
- ✨ 双击图片卡片打开全屏预览
- ✨ 显示原图完整尺寸
- ✨ 展示详细信息（尺寸、文件大小、URL）

#### 2. 文件大小显示
- ✨ 缩略图卡片显示文件大小
- ✨ 自动格式化为 B/KB/MB

#### 3. 交互增强
- ✨ 键盘导航：`←` `→` 切换，`ESC` 关闭
- ✨ 鼠标操作：导航按钮、关闭按钮、点击背景关闭

### 📂 修改的文件
- `manifest.json` - 版本号从 1.0.0 → 1.1.0
- `popup.html` - 新增模态框 HTML + 120 行 CSS 样式
- `popup.js` - 新增预览逻辑 + 文件大小处理（约 80 行）
- `CHANGELOG.md` - 新增 v1.1.0 更新记录

### 🔑 关键代码
```javascript
// 新增函数
- fetchImageSize(url)      // 获取文件大小
- formatFileSize(bytes)    // 格式化显示
- openPreview(index)       // 打开预览
- closePreview()           // 关闭预览
- updatePreview()          // 更新预览内容
- navigatePrev/Next()      // 导航切换
```

### 📊 代码统计
- 新增代码：约 200 行（HTML + CSS + JS）
- 修改代码：约 30 行
- 新增函数：7 个

---

## v1.0.0 (2026-01-19) - 首次发布

### 🎯 初始功能
- ✅ 智能扫描网页图片
- ✅ 可视化网格展示
- ✅ 批量选择与下载
- ✅ 尺寸过滤（大图筛选）
- ✅ 跨域下载支持
- ✅ 现代化 UI 设计

### 📂 核心文件
- `manifest.json` - 扩展配置
- `popup.html` - 主界面
- `popup.js` - 核心逻辑
- `background.js` - 后台下载服务
- `README.md` - 项目说明
- `CHANGELOG.md` - 更新日志

---

## 更新指南

### 每次更新必做：

1. **更新版本号** (`manifest.json`)
   - 次版本更新（新功能）：`1.x.0` → `1.(x+1).0`
   - 修订版更新（修复）：`1.0.x` → `1.0.(x+1)`

2. **更新 CHANGELOG.md**
   - 在最前面添加新版本记录
   - 按类别组织：✨新增功能、🔧改进、🐛修复、📝文档
   - 包含发布日期

3. **更新本文档** (`VERSION_UPDATES.md`)
   - 记录核心变更
   - 列出修改的文件
   - 添加关键代码说明

4. **测试验证**
   - 在浏览器中重新加载扩展
   - 验证新功能正常工作
   - 确保不影响现有功能

5. **提交代码**
   ```bash
   git add .
   git commit -m "feat: 添加图片预览功能 v1.1.0"
   git tag v1.1.0
   git push && git push --tags
   ```

### 版本号规则

遵循[语义化版本控制](https://semver.org/lang/zh-CN/)：

- **主版本 (x.0.0)**：不兼容的 API 修改
- **次版本 (1.x.0)**：向下兼容的新功能
- **修订版 (1.0.x)**：向下兼容的问题修复

---

最后更新：2026-01-29
